(()=>{let e=[],t=[],l=["C","D","H","S"],r=["A","J","Q","K"],a=document.querySelector("#btnGetCard"),d=document.querySelector("#btnNewGame"),n=document.querySelector("#btnStopGame"),s=document.querySelectorAll(".divCartas"),i=document.querySelectorAll("small"),o=(e=2)=>{c(),t=[];for(let l=0;l<e;l++)t.push(0);console.log(t),i.forEach(e=>e.innerText=0),s.forEach(e=>e.innerHTML=""),a.disabled=!1,n.disabled=!1};a.addEventListener("click",()=>{let t=_(e),l=f(t);u(0,t);let r=b(0,l);r>21?(p(r),a.disabled=!0,n.disabled=!0):21===r&&(p(r),a.disabled=!0,n.disabled=!0)}),n.addEventListener("click",()=>{let[e]=t;a.disabled=!0,n.disabled=!0,p(e)}),d.addEventListener("click",()=>{o()});let c=()=>{for(let t=2;t<=10;t++)for(let a of l)e.push(t+a);for(let d of r)for(let n of l)e.push(d+n);return $(e)},$=(e=[])=>{for(let t=0;t<e.length;t++){let l=Math.floor(Math.random()*(e.length-t)+t),r=e[t];e[t]=e[l],e[l]=r}},_=(e=[])=>e.shift(),f=(e="")=>{let t=e.substring(0,e.length-1);return isNaN(t)?"A"==t?11:10:1*t},u=(e,t)=>{let l=document.createElement("img");l.src=`assets/poker-cards/cards/${t}.png`,l.classList="card",s[e].append(l)},b=(e,l)=>(t[e]=t[e]+l,i[e].innerText=t[e],t[e]),h=()=>{let[e,l]=t;setTimeout(()=>{l===e?alert("Empates"):e>21?alert("Computadora Win"):l>21?alert("Player Win"):alert("Computer Win")},500)},p=(l=0)=>{let r=0;do{let a=_(e),d=f(a);r=b(t.length-1,d),u(t.length-1,a)}while(r<l&&l<=21);h()}})();